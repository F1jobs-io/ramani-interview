<h1>Welcome to Your Interview Prep Hub</h1>
<p class="muted">Your comprehensive preparation platform for the LabConnect Clinical Trial Salesforce Administrator position</p>

<!-- Progress Dashboard -->
<div class="dashboard-container">
  <div class="progress-overview">
    <h2>üìä Preparation Progress</h2>
    <div class="progress-stats">
      <div class="progress-card overall">
        <div class="progress-circle" id="overall-progress">
          <div class="circle-content">
            <span class="percentage" id="overall-percentage">0%</span>
            <span class="label">Complete</span>
          </div>
        </div>
        <div class="progress-details">
          <h3>Overall Readiness</h3>
          <div class="progress-breakdown">
            <div class="breakdown-item">
              <span class="confident-count" id="confident-questions">0</span>
              <span class="breakdown-label">Confident Answers</span>
            </div>
            <div class="breakdown-item">
              <span class="practice-streak" id="practice-streak">0</span>
              <span class="breakdown-label">Day Streak</span>
            </div>
          </div>
        </div>
      </div>

      <div class="progress-categories">
        <div class="category-progress" data-category="opening">
          <div class="category-bar">
            <div class="category-fill" style="width: 0%"></div>
          </div>
          <div class="category-info">
            <span class="category-name">Opening Questions</span>
            <span class="category-score">0/2</span>
          </div>
        </div>
        <div class="category-progress" data-category="clinical">
          <div class="category-bar">
            <div class="category-fill" style="width: 0%"></div>
          </div>
          <div class="category-info">
            <span class="category-name">Clinical Trial Context</span>
            <span class="category-score">0/2</span>
          </div>
        </div>
        <div class="category-progress" data-category="technical">
          <div class="category-bar">
            <div class="category-fill" style="width: 0%"></div>
          </div>
          <div class="category-info">
            <span class="category-name">Technical Deep Dives</span>
            <span class="category-score">0/3</span>
          </div>
        </div>
        <div class="category-progress" data-category="behavioral">
          <div class="category-bar">
            <div class="category-fill" style="width: 0%"></div>
          </div>
          <div class="category-info">
            <span class="category-name">Behavioral Scenarios</span>
            <span class="category-score">0/3</span>
          </div>
        </div>
        <div class="category-progress" data-category="role-specific">
          <div class="category-bar">
            <div class="category-fill" style="width: 0%"></div>
          </div>
          <div class="category-info">
            <span class="category-name">Role-Specific</span>
            <span class="category-score">0/2</span>
          </div>
        </div>
        <div class="category-progress" data-category="company">
          <div class="category-bar">
            <div class="category-fill" style="width: 0%"></div>
          </div>
          <div class="category-info">
            <span class="category-name">Company-Specific</span>
            <span class="category-score">0/2</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="quick-actions">
    <h2>üöÄ Quick Actions</h2>
    <div class="action-grid">
      <button class="action-card primary" onclick="quickAction('practice')">
        <div class="action-icon">üéØ</div>
        <div class="action-content">
          <h3>Start Practice</h3>
          <p>Jump into interactive practice mode</p>
        </div>
      </button>
      <button class="action-card" onclick="quickAction('weak-areas')">
        <div class="action-icon">üìà</div>
        <div class="action-content">
          <h3>Focus Weak Areas</h3>
          <p>Practice questions you need to improve</p>
        </div>
      </button>
      <button class="action-card" onclick="quickAction('mock-interview')">
        <div class="action-icon">üé≠</div>
        <div class="action-content">
          <h3>Mock Interview</h3>
          <p>Full end-to-end interview simulation</p>
        </div>
      </button>
      <button class="action-card" onclick="quickAction('study-plan')">
        <div class="action-icon">üìö</div>
        <div class="action-content">
          <h3>Study Plan</h3>
          <p>Review your preparation timeline</p>
        </div>
      </button>
    </div>
  </div>

  <!-- Recent Activity -->
  <div class="recent-activity">
    <h2>üìù Recent Activity</h2>
    <div class="activity-list" id="activity-list">
      <div class="activity-item placeholder">
        <div class="activity-icon">üëã</div>
        <div class="activity-content">
          <div class="activity-title">Welcome to your prep hub!</div>
          <div class="activity-time">Just now</div>
        </div>
      </div>
    </div>
  </div>
</div>

<hr/>

<h2>üéØ What's Included</h2>
<div class="features-grid">
  <div class="feature-card">
    <div class="feature-icon">üè¢</div>
    <h3>Company Deep Dive</h3>
    <p>Comprehensive LabConnect profile, culture, and strategic insights</p>
  </div>
  <div class="feature-card">
    <div class="feature-icon">üë§</div>
    <h3>Personal Strategy</h3>
    <p>Ramani's customized approach, elevator pitch, and 30/60/90 plan</p>
  </div>
  <div class="feature-card">
    <div class="feature-icon">üíª</div>
    <h3>Technical Mastery</h3>
    <p>Salesforce expertise, clinical trial context, and compliance knowledge</p>
  </div>
  <div class="feature-card">
    <div class="feature-icon">üéØ</div>
    <h3>Interactive Practice</h3>
    <p>Multiple practice modes with timing, confidence tracking, and analytics</p>
  </div>
  <div class="feature-card">
    <div class="feature-icon">ü§ù</div>
    <h3>Behavioral Excellence</h3>
    <p>STAR method responses for leadership, conflict, and teamwork scenarios</p>
  </div>
  <div class="feature-card">
    <div class="feature-icon">üìã</div>
    <h3>Final Checklists</h3>
    <p>Pre-interview preparation, materials, and last-minute reminders</p>
  </div>
</div>

<h2>üß≠ Navigation Tips</h2>
<div class="callout">
  <ul>
    <li><strong>Sidebar Navigation:</strong> Click any section in the left panel to switch topics quickly</li>
    <li><strong>Search Functions:</strong> Use the top search box for current page, or "Global Search" to scan all documents</li>
    <li><strong>Bookmarks:</strong> Click the "Bookmark" button next to any heading to save important sections</li>
    <li><strong>Notes System:</strong> Take notes in the right panel - they auto-save per document or globally</li>
    <li><strong>Practice Mode:</strong> Use "Interactive Practice" for hands-on interview simulation with confidence tracking</li>
    <li><strong>Mobile Friendly:</strong> Fully responsive design works perfectly on phones and tablets</li>
  </ul>
</div>

<div class="callout success">
  <strong>üí° Pro Tip:</strong> Start with the "Study Plan" to understand your preparation timeline, then dive into "Interactive Practice" to build confidence with the most challenging questions first!
</div>

<script>
// Dashboard functionality
function updateDashboard() {
  const confidence = JSON.parse(localStorage.getItem('interview-confidence') || '{}');
  const totalQuestions = 20;
  const confidentCount = Object.values(confidence).filter(level => level === 'high').length;
  const overallProgress = Math.round((confidentCount / totalQuestions) * 100);

  // Update overall progress
  document.getElementById('overall-percentage').textContent = overallProgress + '%';
  document.getElementById('confident-questions').textContent = confidentCount;

  // Update practice streak
  const streak = localStorage.getItem('practice-streak') || '0';
  document.getElementById('practice-streak').textContent = streak;

  // Update progress circle
  const circle = document.getElementById('overall-progress');
  const circumference = 2 * Math.PI * 45; // radius = 45
  const offset = circumference - (overallProgress / 100) * circumference;

  const svg = circle.querySelector('svg') || createProgressCircle();
  if (!circle.querySelector('svg')) {
    circle.appendChild(svg);
  }

  const progressCircle = svg.querySelector('.progress-ring');
  progressCircle.style.strokeDasharray = circumference;
  progressCircle.style.strokeDashoffset = offset;

  // Update category progress
  updateCategoryProgress(confidence);

  // Update recent activity
  updateRecentActivity();
}

function createProgressCircle() {
  const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
  svg.setAttribute('width', '120');
  svg.setAttribute('height', '120');
  svg.classList.add('progress-svg');

  const backgroundCircle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
  backgroundCircle.setAttribute('cx', '60');
  backgroundCircle.setAttribute('cy', '60');
  backgroundCircle.setAttribute('r', '45');
  backgroundCircle.setAttribute('stroke', getComputedStyle(document.documentElement).getPropertyValue('--progress-bg').trim());
  backgroundCircle.setAttribute('stroke-width', '8');
  backgroundCircle.setAttribute('fill', 'transparent');

  const progressCircle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
  progressCircle.setAttribute('cx', '60');
  progressCircle.setAttribute('cy', '60');
  progressCircle.setAttribute('r', '45');
  progressCircle.setAttribute('stroke', getComputedStyle(document.documentElement).getPropertyValue('--accent').trim());
  progressCircle.setAttribute('stroke-width', '8');
  progressCircle.setAttribute('fill', 'transparent');
  progressCircle.setAttribute('stroke-linecap', 'round');
  progressCircle.setAttribute('transform', 'rotate(-90 60 60)');
  progressCircle.classList.add('progress-ring');

  svg.appendChild(backgroundCircle);
  svg.appendChild(progressCircle);

  return svg;
}

function updateCategoryProgress(confidence) {
  const categories = {
    opening: { questions: 2, confident: 0 },
    clinical: { questions: 2, confident: 0 },
    technical: { questions: 3, confident: 0 },
    behavioral: { questions: 3, confident: 0 },
    'role-specific': { questions: 2, confident: 0 },
    company: { questions: 2, confident: 0 },
    'problem-solving': { questions: 2, confident: 0 },
    strategic: { questions: 2, confident: 0 },
    closing: { questions: 2, confident: 0 }
  };

  // Count confident answers by category
  Object.entries(confidence).forEach(([question, level]) => {
    if (level === 'high') {
      // Simple mapping based on question content - this could be improved
      if (question.includes('yourself') || question.includes('data clean-up')) {
        categories.opening.confident++;
      } else if (question.includes('clinical trial') || question.includes('21 CFR')) {
        categories.clinical.confident++;
      } else if (question.includes('Flow') || question.includes('integration') || question.includes('performance')) {
        categories.technical.confident++;
      } else if (question.includes('conflicting priorities') || question.includes('mistake') || question.includes('non-technical')) {
        categories.behavioral.confident++;
      } else if (question.includes('cleaning up') || question.includes('Conga')) {
        categories['role-specific'].confident++;
      } else if (question.includes('LabConnect') || question.includes('hybrid work')) {
        categories.company.confident++;
      }
    }
  });

  // Update category progress bars
  Object.entries(categories).forEach(([category, data]) => {
    const element = document.querySelector(`[data-category="${category}"]`);
    if (element) {
      const progress = data.questions > 0 ? (data.confident / data.questions) * 100 : 0;
      const fill = element.querySelector('.category-fill');
      const score = element.querySelector('.category-score');

      if (fill) fill.style.width = progress + '%';
      if (score) score.textContent = `${data.confident}/${data.questions}`;
    }
  });
}

function updateRecentActivity() {
  const activities = JSON.parse(localStorage.getItem('recent-activities') || '[]');
  const activityList = document.getElementById('activity-list');

  if (activities.length === 0) {
    return; // Keep placeholder
  }

  activityList.innerHTML = '';
  activities.slice(-5).reverse().forEach(activity => {
    const item = document.createElement('div');
    item.className = 'activity-item';
    item.innerHTML = `
      <div class="activity-icon">${activity.icon}</div>
      <div class="activity-content">
        <div class="activity-title">${activity.title}</div>
        <div class="activity-time">${formatTime(activity.timestamp)}</div>
      </div>
    `;
    activityList.appendChild(item);
  });
}

function formatTime(timestamp) {
  const now = Date.now();
  const diff = now - timestamp;
  const minutes = Math.floor(diff / (1000 * 60));
  const hours = Math.floor(diff / (1000 * 60 * 60));
  const days = Math.floor(diff / (1000 * 60 * 60 * 24));

  if (minutes < 1) return 'Just now';
  if (minutes < 60) return `${minutes}m ago`;
  if (hours < 24) return `${hours}h ago`;
  return `${days}d ago`;
}

function quickAction(action) {
  // Log activity
  const activities = JSON.parse(localStorage.getItem('recent-activities') || '[]');
  const newActivity = {
    icon: getActionIcon(action),
    title: getActionTitle(action),
    timestamp: Date.now()
  };
  activities.push(newActivity);
  localStorage.setItem('recent-activities', JSON.stringify(activities.slice(-10)));

  // Navigate to appropriate page
  switch(action) {
    case 'practice':
      loadDoc('practice_mode');
      break;
    case 'weak-areas':
      loadDoc('practice_mode');
      // Could add URL fragment to trigger weak areas mode
      break;
    case 'mock-interview':
      loadDoc('labconnect_mock');
      break;
    case 'study-plan':
      loadDoc('study_plan');
      break;
  }
}

function getActionIcon(action) {
  const icons = {
    practice: 'üéØ',
    'weak-areas': 'üìà',
    'mock-interview': 'üé≠',
    'study-plan': 'üìö'
  };
  return icons[action] || '‚ú®';
}

function getActionTitle(action) {
  const titles = {
    practice: 'Started practice session',
    'weak-areas': 'Focused on weak areas',
    'mock-interview': 'Started mock interview',
    'study-plan': 'Reviewed study plan'
  };
  return titles[action] || 'Took action';
}

// Initialize dashboard
document.addEventListener('DOMContentLoaded', function() {
  updateDashboard();

  // Update dashboard every 30 seconds
  setInterval(updateDashboard, 30000);
});

// Listen for storage changes from other tabs
window.addEventListener('storage', function(e) {
  if (e.key === 'interview-confidence' || e.key === 'recent-activities') {
    updateDashboard();
  }
});
</script>

<style>
.dashboard-container {
  display: grid;
  gap: 32px;
  margin-bottom: 40px;
}

.progress-overview {
  background: var(--card-bg);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 24px;
}

.progress-stats {
  display: grid;
  grid-template-columns: 300px 1fr;
  gap: 32px;
  align-items: start;
}

.progress-card.overall {
  display: flex;
  gap: 20px;
  align-items: center;
}

.progress-circle {
  position: relative;
  width: 120px;
  height: 120px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.circle-content {
  position: absolute;
  text-align: center;
  z-index: 1;
}

.percentage {
  display: block;
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--accent);
}

.label {
  display: block;
  font-size: 0.8rem;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.progress-details h3 {
  margin: 0 0 12px 0;
  color: var(--fg);
}

.progress-breakdown {
  display: grid;
  gap: 12px;
}

.breakdown-item {
  display: flex;
  align-items: center;
  gap: 8px;
}

.confident-count, .practice-streak {
  font-size: 1.2rem;
  font-weight: 600;
  color: var(--accent);
  min-width: 24px;
}

.breakdown-label {
  color: var(--muted);
  font-size: 0.9rem;
}

.progress-categories {
  display: grid;
  gap: 16px;
}

.category-progress {
  display: grid;
  grid-template-columns: 1fr 80px;
  gap: 12px;
  align-items: center;
}

.category-bar {
  height: 8px;
  background: var(--progress-bg);
  border-radius: 4px;
  overflow: hidden;
}

.category-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--accent), #9333ea);
  transition: width 0.6s ease;
  border-radius: 4px;
}

.category-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.category-name {
  color: var(--fg);
  font-size: 0.9rem;
}

.category-score {
  color: var(--muted);
  font-size: 0.8rem;
  font-weight: 600;
}

.quick-actions {
  background: var(--card-bg);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 24px;
}

.action-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 16px;
  margin-top: 16px;
}

.action-card {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 16px;
  background: transparent;
  border: 1px solid var(--border);
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  text-align: left;
}

.action-card:hover {
  border-color: var(--accent);
  background: rgba(124, 58, 237, 0.05);
  transform: translateY(-2px);
}

.action-card.primary {
  border-color: var(--accent);
  background: rgba(124, 58, 237, 0.1);
}

.action-icon {
  font-size: 2rem;
  width: 50px;
  text-align: center;
}

.action-content h3 {
  margin: 0 0 4px 0;
  color: var(--fg);
  font-size: 1rem;
}

.action-content p {
  margin: 0;
  color: var(--muted);
  font-size: 0.9rem;
}

.recent-activity {
  background: var(--card-bg);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 24px;
}

.activity-list {
  margin-top: 16px;
  display: grid;
  gap: 12px;
}

.activity-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  background: rgba(255, 255, 255, 0.02);
  border-radius: 8px;
}

.activity-item.placeholder {
  opacity: 0.6;
}

.activity-icon {
  font-size: 1.2rem;
  width: 32px;
  text-align: center;
}

.activity-title {
  color: var(--fg);
  font-size: 0.9rem;
}

.activity-time {
  color: var(--muted);
  font-size: 0.8rem;
}

.features-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 20px;
  margin: 20px 0;
}

.feature-card {
  background: var(--card-bg);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 20px;
  text-align: center;
  transition: all 0.3s ease;
}

.feature-card:hover {
  border-color: var(--accent);
  transform: translateY(-2px);
}

.feature-icon {
  font-size: 2.5rem;
  margin-bottom: 12px;
  display: block;
}

.feature-card h3 {
  margin: 0 0 8px 0;
  color: var(--fg);
}

.feature-card p {
  margin: 0;
  color: var(--muted);
  line-height: 1.4;
}

.progress-svg {
  position: absolute;
  top: 0;
  left: 0;
}

.progress-ring {
  transition: stroke-dashoffset 0.8s ease;
}

@media (max-width: 768px) {
  .progress-stats {
    grid-template-columns: 1fr;
    gap: 24px;
  }

  .progress-card.overall {
    flex-direction: column;
    text-align: center;
    gap: 16px;
  }

  .action-grid {
    grid-template-columns: 1fr;
  }

  .category-progress {
    grid-template-columns: 1fr;
    gap: 8px;
  }

  .category-info {
    flex-direction: column;
    align-items: flex-start;
    gap: 4px;
  }

  .features-grid {
    grid-template-columns: 1fr;
  }
}
</style>